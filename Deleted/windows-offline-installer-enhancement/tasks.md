# برنامه اجرایی: بهبود اسکریپت نصب آفلاین ویندوز

## مرور کلی

این برنامه اجرایی شامل بهبود و تکمیل اسکریپت PowerShell موجود برای نصب آفلاین ابزارهای توسعه اندروید است. هدف ایجاد یک اسکریپت هوشمند، قوی و کاربرپسند است که بتواند تمام کامپوننت‌ها را به صورت خودکار تشخیص، نصب و تست کند.

## وظایف

- [x] 1. بهبود موتور تشخیص هوشمند کامپوننت‌ها
  - بهبود الگوریتم جستجوی بازگشتی برای تشخیص فایل‌های اجرایی
  - اضافه کردن پشتیبانی از تشخیص نسخه‌های مختلف کامپوننت‌ها
  - پیاده‌سازی کش تشخیص برای بهبود عملکرد
  - _الزامات: ۱.۱، ۱.۲، ۱.۳، ۱.۴، ۱.۵، ۱.۶، ۱.۷، ۱.۸، ۱.۹، ۱.۱۰_

- [x] 2. پیاده‌سازی سیستم اعتبارسنجی پیشرفته
  - بهبود تابع اعتبارسنجی ZIP با بررسی تعداد فایل‌ها
  - اضافه کردن بررسی امضای دیجیتال فایل‌های اجرایی
  - پیاده‌سازی بررسی اندازه فایل با آستانه‌های مناسب
  - اضافه کردن اعتبارسنجی ساختار پوشه‌های SDK
  - _الزامات: ۲.۱، ۲.۲، ۲.۳، ۲.۴، ۲.۵، ۲.۶، ۲.۷، ۲.۸_

- [x] 3. ایجاد سیستم بررسی اولیه و تعامل کاربر
  - پیاده‌سازی مرحله بررسی اولیه تمام کامپوننت‌ها
  - ایجاد سیستم جمع‌آوری سوالات قبل از شروع نصب
  - پیاده‌سازی مدیریت فایل‌های گمشده با راهنمایی دانلود
  - اضافه کردن گزینه بررسی مجدد پس از اضافه کردن فایل‌ها
  - _الزامات: ۱۲.۱، ۱۲.۲، ۱۲.۳، ۱۲.۴، ۱۲.۵، ۱۲.۶، ۱۲.۷، ۱۳.۱، ۱۳.۲، ۱۳.۳، ۱۳.۴، ۱۳.۵، ۱۳.۶_

- [x] 4. بهبود سیستم نصب هوشمند
  - پیاده‌سازی تشخیص کامپوننت‌های نصب شده قبلی
  - اضافه کردن گزینه به‌روزرسانی برای نسخه‌های قدیمی
  - بهبود الگوریتم استخراج ZIP با مدیریت خطای بهتر
  - پیاده‌سازی انتخاب خودکار جدیدترین نسخه در صورت وجود چندین نسخه
  - تنظیم استخراج ZIP ها در پوشه `.ignoredDownloads`
  - _الزامات: ۳.۱، ۳.۲، ۳.۳، ۳.۴، ۳.۵، ۳.۶، ۳.۷_

- [x] 5. بهبود مدیریت متغیرهای محیطی
  - بهبود تابع تنظیم متغیرهای محیطی با پشتیبانی از سطوح مختلف
  - پیاده‌سازی الگوریتم جلوگیری از تکرار در PATH
  - اضافه کردن اعتبارسنجی تنظیمات محیطی
  - پیاده‌سازی تنظیم متغیرها در session فعلی
  - _الزامات: ۴.۱، ۴.۲، ۴.۳، ۴.۴، ۴.۵، ۴.۶، ۴.۷_

- [x] 6. پیاده‌سازی سیستم مدیریت خطای پیشرفته
  - ایجاد سیستم کدگذاری خطاها با پیام‌های فارسی
  - پیاده‌سازی تشخیص علت خطا و ارائه راه‌حل
  - اضافه کردن مدیریت خطاهای مجوز دسترسی
  - پیاده‌سازی بررسی فضای دیسک و وضعیت شبکه
  - _الزامات: ۷.۱، ۷.۲، ۷.۳، ۷.۴، ۷.۵، ۷.۶، ۷.۷، ۷.۸_

- [x] 7. ایجاد سیستم گزارش‌دهی و لاگ‌گیری
  - پیاده‌سازی لاگ‌گیری با سطوح مختلف (Info، Warning، Error)
  - ایجاد گزارش نهایی با خلاصه کامپوننت‌های نصب شده
  - پیاده‌سازی ذخیره لاگ در فایل
  - اضافه کردن اندازه‌گیری زمان عملیات
  - ایجاد گزارش HTML تفصیلی
  - _الزامات: ۸.۱، ۸.۲، ۸.۳، ۸.۴، ۸.۵، ۸.۶، ۸.۷_

- [x] 8. پیاده‌سازی پشتیبانی از نسخه‌های مختلف
  - اضافه کردن تشخیص و مدیریت نسخه‌های مختلف JDK
  - پیاده‌سازی انتخاب نسخه سازگار Gradle
  - اضافه کردن پشتیبانی از نسخه‌های مختلف Build Tools
  - پیاده‌سازی هشدار برای نسخه‌های ناسازگار
  - ایجاد ماتریس سازگاری کامپوننت‌ها
  - _الزامات: ۹.۱، ۹.۲، ۹.۳، ۹.۴، ۹.۵، ۹.۶_

- [x] 9. بهینه‌سازی عملکرد اسکریپت
  - بهبود الگوریتم‌های جستجو برای سرعت بیشتر
  - پیاده‌سازی کپی سریع فایل‌ها
  - اضافه کردن نوار پیشرفت برای عملیات طولانی
  - بهینه‌سازی مصرف حافظه
  - پیاده‌سازی جستجوی موازی و کش‌سازی
  - _الزامات: ۱۰.۱، ۱۰.۲، ۱۰.۳، ۱۰.۴، ۱۰.۵، ۱۰.۶_

- [x] 10. پیاده‌سازی حالت‌های مختلف اجرا
  - اضافه کردن پشتیبانی از پارامترهای خط فرمان
  - پیاده‌سازی حالت Silent برای اجرای بدون تعامل
  - اضافه کردن حالت Verbose برای اطلاعات تفصیلی
  - پیاده‌سازی حالت DryRun برای شبیه‌سازی
  - اضافه کردن حالت CheckOnly برای بررسی بدون نصب
  - _الزامات: ۱۱.۱، ۱۱.۲، ۱۱.۳، ۱۱.۴، ۱۱.۵، ۱۱.۶_

- [ ] 11. ایجاد و تست پروژه Hello World نهایی
  - پیاده‌سازی تابع ایجاد پروژه Hello World اندروید
  - ایجاد فایل‌های gradle.build، AndroidManifest.xml و MainActivity
  - اجرای کامپایل آفلاین با `./gradlew assembleDebug --offline`
  - تأیید تولید APK و نمایش مسیر آن
  - _الزامات: ۶.۱، ۶.۲، ۶.۳، ۶.۴، ۶.۵، ۶.۶، ۶.۷، ۶.۸_

- [ ] 12. نقطه بررسی - اطمینان از عملکرد تمام تست‌ها
  - اطمینان از عملکرد تمام تست‌ها، در صورت بروز سوال از کاربر سوال کنید.

## یادداشت‌ها

- تمام پیام‌ها و خروجی‌ها باید به زبان فارسی باشند
- اسکریپت باید با PowerShell 5.1 و بالاتر سازگار باشد
- تمام عملیات باید کاملاً آفلاین قابل اجرا باشند
- مدیریت خطا باید دفاعی و با پیام‌های واضح باشد
- هر وظیفه باید به الزامات مشخص شده در سند requirements ارجاع دهد