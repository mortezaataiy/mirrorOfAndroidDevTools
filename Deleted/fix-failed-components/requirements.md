# سند الزامات - رفع کامپوننت‌های ناکام

## مقدمه

این مشخصات الزامات رفع مشکل کامپوننت‌های ناکام در workflow اصلی را تعریف می‌کند. کامپوننت‌های زیر در workflow اصلی ناکام شده‌اند و نیاز به URL های جایگزین یا روش‌های دانلود متفاوت دارند:

- Platform Tools (1449 bytes - احتمالاً HTML redirect)
- SDK Platform API 33 (1449 bytes - احتمالاً HTML redirect)  
- Android M2Repository (1449 bytes - احتمالاً HTML redirect)
- Google M2Repository (1449 bytes - احتمالاً HTML redirect)

## واژه‌نامه

- **Failed_Component**: کامپوننتی که در workflow اصلی دانلود نشده است
- **Alternative_URL**: URL جایگزین برای دانلود کامپوننت
- **Test_Workflow**: workflow آزمایشی برای تست کامپوننت‌های ناکام
- **URL_Validation**: بررسی صحت URL قبل از استفاده در workflow اصلی

## الزامات

### الزام ۱: شناسایی URL های جایگزین

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم URL های جایگزین معتبر برای کامپوننت‌های ناکام پیدا کنم تا بتوانم آنها را دانلود کنم.

#### معیارهای پذیرش

1. WHEN یک کامپوننت در workflow اصلی ناکام می‌شود، THEN سیستم باید URL های جایگزین را شناسایی کند
2. WHEN URL جایگزین پیدا می‌شود، THEN سیستم باید آن را در یک workflow آزمایشی تست کند
3. THE سیستم باید حداقل 2 URL جایگزین برای هر کامپوننت ناکام بررسی کند
4. WHEN URL جایگزین تست می‌شود، THEN سیستم باید اندازه فایل و یکپارچگی را بررسی کند

### الزام ۲: ایجاد workflow آزمایشی

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم یک workflow جداگانه برای تست کامپوننت‌های ناکام داشته باشم تا workflow اصلی را خراب نکنم.

#### معیارهای پذیرش

1. THE سیستم باید یک workflow آزمایشی جداگانه ایجاد کند
2. WHEN workflow آزمایشی اجرا می‌شود، THEN فقط کامپوننت‌های ناکام را تست کند
3. THE workflow آزمایشی باید نتایج تست را در artifact جداگانه ذخیره کند
4. WHEN تست موفق می‌شود، THEN سیستم باید URL معتبر را گزارش کند

### الزام ۳: تست Platform Tools

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم Platform Tools را با URL های مختلف تست کنم تا نسخه معتبر را پیدا کنم.

#### معیارهای پذیرش

1. THE سیستم باید URL های مختلف Platform Tools را تست کند
2. WHEN Platform Tools دانلود می‌شود، THEN حداقل اندازه 15MB باشد
3. THE سیستم باید نسخه‌های مختلف Platform Tools را بررسی کند (r35.0.1, r34.0.5, r33.0.2)
4. WHEN Platform Tools معتبر پیدا شد، THEN URL آن را برای workflow اصلی ذخیره کند

### الزام ۴: تست SDK Platform API 33

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم SDK Platform API 33 را با URL های مختلف تست کنم.

#### معیارهای پذیرش

1. THE سیستم باید URL های مختلف SDK Platform API 33 را تست کند
2. WHEN SDK Platform API 33 دانلود می‌شود، THEN حداقل اندازه 25MB باشد
3. THE سیستم باید revision های مختلف را بررسی کند (r03, r02, r01)
4. WHEN SDK Platform API 33 معتبر پیدا شد، THEN URL آن را ذخیره کند

### الزام ۵: تست M2Repository ها

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم Android و Google M2Repository ها را با URL های مختلف تست کنم.

#### معیارهای پذیرش

1. THE سیستم باید URL های مختلف Android M2Repository را تست کند
2. THE سیستم باید URL های مختلف Google M2Repository را تست کند
3. WHEN M2Repository دانلود می‌شود، THEN حداقل اندازه 50MB باشد
4. THE سیستم باید نسخه‌های مختلف را بررسی کند
5. WHEN M2Repository معتبر پیدا شد، THEN URL آن را ذخیره کند

### الزام ۶: اعتبارسنجی URL های جایگزین

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم URL های جایگزین کاملاً اعتبارسنجی شوند قبل از استفاده در workflow اصلی.

#### معیارهای پذیرش

1. WHEN URL جایگزین تست می‌شود، THEN تمام بررسی‌های اعتبارسنجی اعمال شود
2. THE سیستم باید محتوای HTML را تشخیص دهد و رد کند
3. THE سیستم باید یکپارچگی ZIP را بررسی کند
4. THE سیستم باید checksum فایل را محاسبه کند
5. WHEN URL معتبر تأیید شد، THEN آن را برای استفاده در workflow اصلی آماده کند

### الزام ۷: گزارش‌دهی نتایج تست

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم گزارش کاملی از تست URL های جایگزین داشته باشم.

#### معیارهای پذیرش

1. THE سیستم باید گزارش JSON از تمام تست‌ها تولید کند
2. WHEN تست کامل می‌شود، THEN لیست URL های معتبر ارائه شود
3. THE سیستم باید دلیل ناکامی هر URL را گزارش کند
4. WHEN URL های معتبر پیدا شد، THEN دستورالعمل اصلاح workflow اصلی ارائه شود

### الزام ۸: ادغام با workflow اصلی

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم URL های معتبر را به راحتی در workflow اصلی جایگزین کنم.

#### معیارهای پذیرش

1. WHEN URL های معتبر پیدا شد، THEN سیستم باید دستورالعمل واضح ارائه کند
2. THE سیستم باید فایل patch یا script اصلاح تولید کند
3. WHEN workflow اصلی اصلاح شد، THEN تست نهایی انجام شود
4. THE سیستم باید تأیید کند که تمام کامپوننت‌ها موفق هستند