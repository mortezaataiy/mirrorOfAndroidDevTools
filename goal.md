هدف:
ایجاد یک pipeline کامل، قابل اعتماد و دفاعی برای توسعه آفلاین اندروید.

دامنه کار:
1. GitHub Actions workflow
2. اتوماسیون نصب‌کننده آفلاین ویندوز
3. اعتبارسنجی انتها به انتها (SDK → build → Hello World APK)

الزامات سخت (نقض نکنید):
- همه چیز باید پس از دانلود artifacts کاملاً آفلاین باشد
- هر فایل قابل دانلود باید:
  - از طریق URL مستقیم باینری دانلود شود (بدون صفحات HTML)
  - قبل از استفاده اعتبارسنجی شود (تست یکپارچگی ZIP)
  - به عنوان یک GitHub Artifact جداگانه آپلود شود
- هیچ فرضی درباره نام پوشه‌ها یا ساختار
- مدیریت خطای دفاعی با پیام‌های واضح
- بدون ایموجی
- بدون placeholder
- فقط از actions/upload-artifact@v4 استفاده کنید

────────────────────────────────────────
بخش 1 — GitHub Actions (دانلودکننده + اعتبارسنج)
────────────────────────────────────────

یک GitHub Actions workflow ایجاد کنید که:

1. تمام کامپوننت‌های آفلاین اندروید مورد نیاز را دانلود کند، هر کدام به عنوان فایل جداگانه:
   - JDK 17 (Windows x64 ZIP)
   - Gradle (نسخه دقیق سازگار با Android Studio 2022.3.1)
   - Android SDK Command-line Tools (Windows)
   - Platform-tools
   - Build-tools 33.x
   - SDK Platforms: API 33, API 30, API 27
   - Android Emulator system image (API 33 x86_64 Google APIs)
   - AndroidX / Google Maven repositories (android_m2repository, google_m2repository)

2. برای هر فایل دانلود شده:
   - اعتبار آن را به عنوان ZIP واقعی بررسی کند (نه HTML، نه redirect)
   - فوراً fail کند اگر:
     - اندازه فایل مشکوک کوچک باشد
     - تست یکپارچگی ZIP fail شود
   - آن را به عنوان artifact مخصوص خودش آپلود کند (یک فایل = یک artifact)

3. Artifacts باید نام‌گذاری واضحی داشته باشند (مثال):
   - jdk-17
   - gradle-7.5
   - sdk-platform-33
   - build-tools-33.0.2
   - و غیره

4. workflow باید fail شود اگر هر فایل منفردی نامعتبر باشد.

────────────────────────────────────────
بخش 2 — اسکریپت نصب‌کننده آفلاین ویندوز
────────────────────────────────────────

یک اسکریپت PowerShell ایجاد کنید که:

1. کاملاً آفلاین اجرا شود
2. همه چیز را زیر این مسیر نصب کند:
   D:\Android\

3. برای هر کامپوننت مورد نیاز (JDK, Gradle, SDK, و غیره):
   - اگر قبلاً نصب شده → skip کند
   - در غیر این صورت:
     - به صورت بازگشتی برای پوشه استخراج شده حاوی executable مورد انتظار جستجو کند
     - اگر پیدا نشد → به صورت بازگشتی برای ZIP جستجو کند
     - اگر ZIP پیدا شد → ZIP را اعتبارسنجی کند → استخراج کند → نصب کند
     - اگر چیزی پیدا نشد → با خطای صریح fail کند

4. هرگز فرض نکند:
   - نام فایل‌ها
   - نام پوشه‌ها
   - layout آرشیو

5. نصب را با بررسی این موارد اعتبارسنجی کند:
   - java -version
   - gradle -v
   - adb version
   - sdkmanager list

6. متغیرهای محیطی سیستم‌گستر تنظیم کند:
   - JAVA_HOME
   - ANDROID_HOME
   - ANDROID_SDK_ROOT
   - PATH

────────────────────────────────────────
بخش 3 — اعتبارسنجی خودکار Build
────────────────────────────────────────

پس از نصب، اسکریپت باید:

1. یک پروژه اندروید کاملاً جدید ایجاد کند:
   - Hello World
   - Minimum SDK: 21
   - Compile SDK: 33
   - بدون Compose (مبتنی بر XML)

2. پروژه را کاملاً آفلاین build کند:
   - ./gradlew assembleDebug --offline

3. تأیید کند:
   - APK وجود دارد
   - Build موفق بوده

4. خروجی:
   - مسیر مطلق APK تولید شده
   - پیام SUCCESS واضح

────────────────────────────────────────
سیاست شکست
────────────────────────────────────────

- اگر هر مرحله‌ای fail شود:
  - فوراً متوقف شود
  - چاپ کند:
    - چه چیزی fail شده
    - چرا
    - چه فایل یا کامپوننتی گم یا خراب است

────────────────────────────────────────
تحویلی‌ها
────────────────────────────────────────

برگردانید:
1. GitHub Actions YAML کامل
2. اسکریپت نصب‌کننده PowerShell کامل
3. توضیح کوتاه منطق تأیید

بدون توضیحات بین مراحل.
بدون فرضیات.
بدون میانبر.