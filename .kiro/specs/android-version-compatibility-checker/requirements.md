# مستند الزامات

## مقدمه

این سیستم برای پیدا کردن، تست و به‌روزرسانی آخرین ورژن‌های سازگار ابزارهای توسعه اندروید در محیط GitHub Actions طراحی شده است. تمام فرایندها شامل شناسایی ورژن‌ها، دانلود، تست سازگاری و به‌روزرسانی فایل YAML در GitHub Actions ویندوز انجام می‌شود.

## واژه‌نامه

- **Version_Checker**: سیستم اصلی برای بررسی ورژن‌ها
- **Compatibility_Tester**: ماژول تست سازگاری در GitHub Actions که از اسکریپت PowerShell پیشرفته استفاده می‌کند
- **Version_Database**: فایل YAML حاوی اطلاعات ورژن‌ها و لینک‌ها
- **PowerShell_Installer**: اسکریپت `auto-download-and-setup-android-offline.ps1` برای نصب و تست کامل
- **Download_Link**: آدرس دانلود معتبر برای هر ابزار
- **Compatible_Version**: ورژنی که با سایر ابزارها سازگار است

## الزامات

### الزام ۱: شناسایی ورژن‌های جدید در GitHub Actions

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم آخرین ورژن‌های ابزارهای اندروید را در GitHub Actions پیدا کنم تا از جدیدترین امکانات استفاده کنم.

#### معیارهای پذیرش

1. هنگامی که GitHub Action اجرا می‌شود، سیستم باید آخرین ورژن JDK 17 را از سایت Oracle شناسایی کند
2. هنگامی که GitHub Action اجرا می‌شود، سیستم باید آخرین ورژن Gradle سازگار با Android Studio را از سایت Gradle پیدا کند
3. هنگامی که GitHub Action اجرا می‌شود، سیستم باید آخرین ورژن Android Command Line Tools را از مخزن Google شناسایی کند
4. هنگامی که GitHub Action اجرا می‌شود، سیستم باید آخرین ورژن Platform Tools را از مخزن Google پیدا کند
5. هنگامی که GitHub Action اجرا می‌شود، سیستم باید آخرین ورژن Build Tools را از مخزن Google شناسایی کند

### الزام ۲: تست سازگاری با اسکریپت PowerShell پیشرفته

**داستان کاربر:** به عنوان مدیر پروژه، می‌خواهم مطمئن شوم که ورژن‌های شناسایی شده با یکدیگر سازگار هستند و از اسکریپت نصب آفلاین موجود برای تست استفاده شود.

#### معیارهای پذیرش

1. هنگامی که ورژن‌های جدید شناسایی می‌شوند، سیستم باید آنها را در محیط ویندوز GitHub Actions دانلود کند
2. هنگامی که ابزارها دانلود می‌شوند، سیستم باید از اسکریپت `auto-download-and-setup-android-offline.ps1` برای نصب استفاده کند
3. هنگامی که اسکریپت نصب اجرا می‌شود، باید تمام قابلیت‌های پیشرفته آن فعال باشد (تشخیص هوشمند، اعتبارسنجی، تست نهایی)
4. هنگامی که اسکریپت تست Hello World را اجرا می‌کند، سیستم باید نتیجه را بررسی کرده و گزارش دهد
5. اگر تست نهایی موفقیت‌آمیز نباشد، سیستم باید خطا را گزارش کرده و فرایند را متوقف کند

### الزام ۳: مدیریت فایل پایگاه داده ورژن‌ها

**داستان کاربر:** به عنوان کاربر نهایی، می‌خواهم اطلاعات ورژن‌های تست شده در فایلی قابل دسترس ذخیره شوند.

#### معیارهای پذیرش

1. هنگامی که تست‌ها موفقیت‌آمیز هستند، سیستم باید اطلاعات ورژن‌ها را در فایل YAML ذخیره کند
2. هنگامی که فایل YAML به‌روزرسانی می‌شود، سیستم باید نام ورژن، لینک دانلود و تاریخ تست را شامل کند
3. هنگامی که فایل YAML ایجاد می‌شود، سیستم باید آن را در روت پروژه قرار دهد
4. هنگامی که ورژن‌های جدید تست می‌شوند، سیستم باید فایل موجود را به‌روزرسانی کند نه اینکه جایگزین کند
5. هنگامی که خطایی در تست رخ می‌دهد، سیستم باید وضعیت خطا را در فایل YAML ثبت کند

### الزام ۴: اعتبارسنجی لینک‌های دانلود

**داستان کاربر:** به عنوان مدیر سیستم، می‌خواهم مطمئن شوم که لینک‌های دانلود معتبر و قابل دسترس هستند.

#### معیارهای پذیرش

1. هنگامی که لینک دانلود پیدا می‌شود، سیستم باید دسترسی به آن را تست کند
2. هنگامی که فایل دانلود می‌شود، سیستم باید اندازه فایل را بررسی کند
3. اگر فایل ZIP است، سیستم باید یکپارچگی آن را تست کند
4. هنگامی که فایل معتبر نیست، سیستم باید خطای واضح ارائه دهد
5. هنگامی که دانلود ناموفق است، سیستم باید حداکثر ۳ بار تلاش مجدد کند

### الزام ۵: گزارش‌دهی و لاگ‌گذاری

**داستان کاربر:** به عنوان توسعه‌دهنده، می‌خواهم فرایند تست و نتایج آن را به وضوح ببینم.

#### معیارهای پذیرش

1. هنگامی که فرایند شروع می‌شود، سیستم باید مراحل انجام شده را لاگ کند
2. هنگامی که خطایی رخ می‌دهد، سیستم باید جزئیات کامل خطا را نمایش دهد
3. هنگامی که تست موفقیت‌آمیز است، سیستم باید خلاصه‌ای از ورژن‌های تست شده ارائه دهد
4. هنگامی که فایل YAML به‌روزرسانی می‌شود، سیستم باید تغییرات را گزارش کند
5. هنگامی که GitHub Action اجرا می‌شود، سیستم باید وضعیت هر مرحله را نمایش دهد

### الزام ۶: پشتیبانی از ابزارهای مختلف

**داستان کاربر:** به عنوان توسعه‌دهنده اندروید، می‌خواهم تمام ابزارهای ضروری برای توسعه پشتیبانی شوند.

#### معیارهای پذیرش

1. سیستم باید JDK 17 (Windows x64) را پشتیبانی کند
2. سیستم باید Gradle (سازگار با Android Studio) را پشتیبانی کند
3. سیستم باید Android SDK Command Line Tools را پشتیبانی کند
4. سیستم باید Platform Tools را پشتیبانی کند
5. سیستم باید Build Tools را پشتیبانی کند
6. سیستم باید SDK Platforms (API 33, 30, 27) را پشتیبانی کند
7. سیستم باید Android Emulator System Images را پشتیبانی کند
8. سیستم باید AndroidX و Google Maven Repositories را پشتیبانی کند

### الزام ۷: تست یکپارچگی با اسکریپت PowerShell

**داستان کاربر:** به عنوان تست‌کننده، می‌خواهم مطمئن شوم که ابزارهای نصب شده قادر به ایجاد یک پروژه کاربردی هستند و از اسکریپت پیشرفته موجود استفاده شود.

#### معیارهای پذیرش

1. هنگامی که ابزارها دانلود می‌شوند، سیستم باید اسکریپت `auto-download-and-setup-android-offline.ps1` را اجرا کند
2. هنگامی که اسکریپت اجرا می‌شود، باید تمام مراحل تشخیص هوشمند، اعتبارسنجی و نصب انجام شود
3. هنگامی که اسکریپت به مرحله تست می‌رسد، باید پروژه Hello World را ایجاد و کامپایل کند
4. هنگامی که کامپایل موفقیت‌آمیز است، سیستم باید فایل APK تولید شده را تأیید کند
5. هنگامی که APK تولید می‌شود، سیستم باید گزارش HTML و لاگ‌های تفصیلی اسکریپت را ذخیره کند

### الزام ۸: مدیریت خطا و بازیابی

**داستان کاربر:** به عنوان مدیر سیستم، می‌خواهم در صورت بروز خطا، سیستم به درستی واکنش نشان دهد.

#### معیارهای پذیرش

1. اگر دانلود فایلی ناموفق باشد، سیستم باید فرایند را متوقف کرده و خطا را گزارش کند
2. اگر نصب ابزاری ناموفق باشد، سیستم باید جزئیات خطا را در لاگ ثبت کند
3. اگر بیلد Hello World ناموفق باشد، سیستم باید خطاهای کامپایل را نمایش دهد
4. اگر فایل YAML قابل نوشتن نباشد، سیستم باید خطای مجوز دسترسی را گزارش کند
5. هنگامی که خطای شبکه رخ می‌دهد، سیستم باید پیام واضح و راهنمایی ارائه دهد